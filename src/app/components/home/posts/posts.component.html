<div class="parent">
  <div class="container">

    <app-paginator (pageChange)="loadPosts($event.pageIndex, $event.pageSize)"></app-paginator>

    <!-- <mat-paginator #paginator
               class="demo-paginator"
               (page)="handlePageEvent($event)"
               [length]="length"
               [pageSize]="pageSize"
               [disabled]="disabled"
               [showFirstLastButtons]="showFirstLastButtons"
               [pageSizeOptions]="showPageSizeOptions ? pageSizeOptions : []"
               [hidePageSize]="hidePageSize"
               [pageIndex]="pageIndex"
               aria-label="Select page">
    </mat-paginator> -->

    <!-- <mat-paginator
    [pageSize]="page"
    [pageSize]="itemsPerPage"
    (pageChange)="pageChanged()"
    [length]="totalItems"
    >

    </mat-paginator> -->

    <div class="posts" >
      <mat-accordion *ngIf="!loading; else loadingTemplate" >
        <mat-card class="post" *ngFor="let post of userPost">
          <!-- @if(userPost){ -->
          <div class="content">
            <h2>{{ post.title }}</h2>
            <p>{{ post.body }}</p>
          </div>

          
          <mat-expansion-panel hideToggle >
            <mat-expansion-panel-header>
              <mat-panel-title (click)="selectPost(post.id!)">
                View Comments
            </mat-panel-title>

            </mat-expansion-panel-header>
            <div class="comments" *ngIf="commentVisibility[post.id!]; else noComment" >
              <div *ngFor="let comment of comments">
          
            <h2>{{ comment.name }}</h2>
            <p>{{ comment.body }}</p>
            <p>{{ comment.email }}</p>
          



              </div>          
            </div>
            <ng-template #noComment>
              <p>No comments present.</p>
            </ng-template>

          </mat-expansion-panel>


          <mat-expansion-panel hideToggle>
            <mat-expansion-panel-header>
              <mat-panel-title>
                Add Comment
              </mat-panel-title>
            </mat-expansion-panel-header>
  
              <div class="container-form">
                  <form hideToggle (submit)="createComment(post.id!)">
                          <div class="create-comment">
                          <mat-form-field>
                              <mat-label>Title</mat-label>
                              <input matInput type="text" name="commentName" [(ngModel)]="commentName" required>
                            </mat-form-field>
                            <mat-form-field>
                              <mat-label>Textarea</mat-label>
                              <textarea matInput name="newComment" [(ngModel)]="newComment" required></textarea>            
                            </mat-form-field>
                            <button class="add-comment" mat-raised-button type="submit" >Add Comment</button>
                          </div>    
                   </form>
              </div>
  
          </mat-expansion-panel>
        </mat-card> 
      </mat-accordion>
      <ng-template #loadingTemplate>
        <app-loader></app-loader>
      </ng-template>
    </div>



  </div>
</div>








